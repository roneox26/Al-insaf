<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ржЕржЩрзНржЧрзАржХрж╛рж░ржирж╛ржорж╛</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        @page { size: A4; margin: 12mm; }
        @media print {
            .no-print { display: none !important; }
            body { margin: 0; padding: 12mm; }
        }
        body { 
            font-family: 'Kalpurush', 'Nikosh', Arial, sans-serif; 
            margin: 0; padding: 20px; font-size: 10px; line-height: 1.3;
            width: 210mm; min-height: 297mm; background: white;
        }
        .header { text-align: center; margin-bottom: 5px; border-bottom: 2px double #000; padding-bottom: 4px; position: relative; }
        .header h2 { margin: 1px; font-size: 17px; font-weight: bold; color: #1a1a1a; }
        .header p { margin: 0; font-size: 8px; color: #333; }
        .header h3 { 
            margin: 3px auto; font-size: 12px; background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
            color: #000; padding: 4px 12px; display: inline-block; border-radius: 3px; 
            box-shadow: 0 1px 3px rgba(255,193,7,0.4); font-weight: bold;
        }
        .photo-box { 
            position: absolute; right: 10px; top: 5px; width: 70px; height: 85px;
            border: 1.5px solid #000; display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            font-size: 8px; color: #666; font-weight: bold;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        .form-section { margin: 3px 0; }
        .form-section p { margin: 2px 0; text-align: justify; line-height: 1.3; }
        .content-box {
            background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
            border: 1.5px solid #ffc107; padding: 6px; margin: 4px 0;
            border-radius: 4px; text-align: justify; line-height: 1.3;
            box-shadow: 0 1px 4px rgba(255,193,7,0.3);
        }
        .content-box p { margin: 3px 0; }
        .content-box strong { color: #f57c00; font-weight: 700; }
        .signature-section { 
            margin-top: 12px; display: flex; justify-content: space-between;
            font-size: 9px; padding-top: 6px; border-top: 1px solid #ddd;
        }
        .signature-box { text-align: center; min-width: 70px; }
        .signature-box > div:first-child { font-weight: 600; color: #333; margin-bottom: 2px; }
        .signature-line { border-top: 1px solid #000; margin-top: 20px; padding-top: 2px; font-weight: 500; }
        .no-print { 
            position: fixed; top: 10px; right: 10px; z-index: 1000;
            background: white; padding: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border-radius: 10px; border: 2px solid #ffc107; max-width: 350px;
        }
        @media print {
            .no-print { display: none !important; }
        }
        .customer-select {
            margin-bottom: 12px; padding: 10px; background: linear-gradient(135deg, #fff9e6 0%, #fff3cd 100%);
            border-radius: 8px; border: 2px solid #ffc107;
        }
        .customer-select label { font-weight: bold; margin-bottom: 5px; display: block; color: #f57c00; }
        .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; 
               font-size: 14px; font-weight: 500; transition: all 0.3s; }
        .btn-warning { background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%); color: #000; font-weight: 600; }
        .btn-warning:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(255,193,7,0.5); }
        .btn-secondary { background: #6c757d; color: white; text-decoration: none; display: inline-block; }
        .info-highlight { background: #fff3cd; padding: 3px 10px; border-radius: 4px; font-weight: 600; border: 1px solid #ffc107; }
        .terms-list { background: white; padding: 6px; border-radius: 4px; margin: 4px 0; border-left: 2px solid #ffc107; }
        .terms-list p { margin: 3px 0; padding-left: 4px; }
    </style>
</head>
<body>
    <div class="no-print">
        <div class="customer-select">
            <label>рж╕ржжрж╕рзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи:</label>
            <select id="customerSelect" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #ffc107;">
                <option value="">-- рж╕ржжрж╕рзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --</option>
                {% for c in customers %}
                <option value="{{ c.id }}" {% if customer and customer.id == c.id %}selected{% endif %}>
                    {{ c.member_no }} - {{ c.name }} - {{ c.phone }}
                </option>
                {% endfor %}
            </select>
        </div>
        <button onclick="window.print()" class="btn btn-warning">ЁЯЦия╕П ржкрзНрж░рж┐ржирзНржЯ ржХрж░рзБржи</button>
        <a href="{{ url_for('application_forms') }}" class="btn btn-secondary">тЖР ржлрж┐рж░рзЗ ржпрж╛ржи</a>
    </div>

    <div class="header">
        <div class="photo-box">ржЫржмрж┐</div>
        <h2>ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ</h2>
        <p>ржарж┐ржХрж╛ржирж╛ржГ ржЧрзНрж░рж╛ржо/ржкрзЛрж╖рзНржЯржГ ржирзЗрж╣рж╛рж▓ржкрзБрж░, ржерж╛ржирж╛ржГ ржоржирж┐рж░рж╛ржоржкрзБрж░, ржЬрзЗрж▓рж╛ржГ ржпрж╢рзЛрж░ред</p>
        <p>рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи ржиржВ: рзнрзо ржЬрзЗ | ржлрзЛржи: рзжрззрзнрззрзл-рзжрзжрзжрзжрзжрзж</p>
        <h3>ржЕржЩрзНржЧрзАржХрж╛рж░ржирж╛ржорж╛</h3>
        <p style="text-align: right; margin: 5px 10px 0 0; font-weight: 500;">рждрж╛рж░рж┐ржЦ: <span id="currentDate" class="info-highlight"></span></p>
    </div>

    <div class="form-section">
        <p><strong>ржмрж░рж╛ржмрж░,</strong><br>
        рж╕ржнрж╛ржкрждрж┐,<br>
        ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ<br>
        ржирзЗрж╣рж╛рж▓ржкрзБрж░ ржмрж╛ржЬрж╛рж░, ржоржирж┐рж░рж╛ржоржкрзБрж░, ржпрж╢рзЛрж░ред</p>
    </div>

    <div class="content-box">
        <p style="text-indent: 50px;">
            ржЖржорж┐ <strong contenteditable="true">{{ customer.name if customer else '___________________________' }}</strong> 
            ржкрж┐рждрж╛/рж╕рзНржмрж╛ржорзА/ржЕржнрж┐ржнрж╛ржмржХ <strong contenteditable="true">{{ customer.father_husband if customer else '___________________________' }}</strong> 
            ржЧрзНрж░рж╛ржо: <strong contenteditable="true">{{ customer.village if customer else '___________' }}</strong> 
            ржкрзЛрж╕рзНржЯ: <strong contenteditable="true">{{ customer.post if customer else '___________' }}</strong> 
            ржерж╛ржирж╛: <strong contenteditable="true">{{ customer.thana if customer else '___________' }}</strong> 
            ржЬрзЗрж▓рж╛: <strong contenteditable="true">{{ customer.district if customer else 'ржпрж╢рзЛрж░' }}</strong>ред 
            "ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ" ржПрж░ ржПржХржЬржи рж╕ржжрж╕рзНржпред
        </p>
        
        <p style="text-indent: 50px;">
            ржЖржорж┐ <strong contenteditable="true">{{ customer.name if customer else '___________________________' }}</strong> 
            ржЙржкрж╢рж╣рж░/ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗ "ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ" ржЖржЮрзНржЪрж▓рж┐ржХ ржХрж╛рж░рзНржпрж╛рж▓ржпрж╝ рж╣ржЗрждрзЗ 
            <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:120px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="____/____/________"> рждрж╛рж░рж┐ржЦрзЗ 
            <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:120px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="_______________"> ржЯрж╛ржХрж╛ 
            (ржХржерж╛ржпрж╝: <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:250px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="_________________________________"> ржЯрж╛ржХрж╛ ржорж╛рждрзНрж░) 
            ржиржЧржж ржЕрж░рзНрже ржЛржг рж╣рж┐рж╕рзЗржмрзЗ ржЧрзНрж░рж╣ржг ржХрж░рж┐рж▓рж╛ржо ржПржмржВ ржПржХрзНрж╖рзЗрждрзНрж░рзЗ ржирж┐ржорзНржирж░рзВржк ржЕржЩрзНржЧрзАржХрж╛рж░ ржХрж░рж┐рждрзЗржЫрж┐ред
        </p>
    </div>

    <div class="terms-list">
        <p><strong>рзз.</strong> ржЖржорж┐ ржЕржжрзНржп <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:120px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="____/____/________"> рждрж╛рж░рж┐ржЦ рж╣ржЗрждрзЗ 
        <input type="text" style="border:none; border-bottom:1px solid #000; width:150px; font-weight:bold;" placeholder="ржкрзНрж░рждрж┐ржжрж┐ржи/рж╕рж╛ржкрзНрждрж╛рж╣рж┐ржХ/ржорж╛рж╕рж┐ржХ"> 
        <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:100px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="_______________"> ржЯрж╛ржХрж╛ ржХрж░рж┐ржпрж╝рж╛ 
        <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:80px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="_______________"> ржХрж┐рж╕рзНрждрж┐рждрзЗ 
        <input type="text" style="border:none; border-bottom:1px solid #000; width:60px; font-weight:bold;" placeholder="рзирзж____"> рж╕ржирзЗрж░ <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:120px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="____/____/________"> рждрж╛рж░рж┐ржЦрзЗрж░ ржоржзрзНржпрзЗ 
        ржЙржкрж░рзЛржХрзНржд ржЛржгрзЗрж░ рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж░рзНржЬ рж╕рж╣ ржмрж╛ржХрж┐ <input type="text" class="info-highlight" style="border:none; border-bottom:1px solid #000; width:60px; background:#fff3cd; padding:3px 10px; border-radius:4px;" placeholder="_____"> рж╢рждрж╛ржВрж╢ рж╣рж╛рж░рзЗ ржкрж░рж┐рж╢рзЛржз ржХрж░рж┐ржмред</p>
        
        <p><strong>рзи.</strong> ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ ржПрж░ ржпрзЗ ржЖржжрж░рзНрж╢ ржУ ржХрж░рзНржорж╕рзВржЪрж┐рждрзЗ ржЙржжрзНржмрзБржжрзНржз рж╣ржЗржпрж╝рж╛ ржЛржг ржЧрзНрж░рж╣ржг ржХрж░рж┐ржпрж╝рж╛ржЫрж┐, 
        ржЖржорж┐ ржПржЗ ржЛржгрзЗрж░ ржЕрж░рзНрже рж╕рзЗржЗ ржЙржжрзНржжрзЗрж╢рзНржпрзЗржЗ ржПржмржВ ржЖржорж╛рж░ рж╕рзЗржЗ ржкрзНрж░рзЛржЧрзНрж░рж╛ржорзЗрж░ рждрж╛ржЧрж┐ржжрзЗржЗ ржЙржХрзНржд ржЛржгрзЗрж░ ржХрж╛ржЬрзЗ рж▓рж╛ржЧрж╛ржЗржмред рждрж╛рж╣рж╛рж░ ржЕржирзНржпржерж╛ ржХрж░рж┐ржм ржирж╛ред 
        ржЕржирзНржпржерж╛ рж╣ржЗрж▓рзЗ ржоржЮрзНржЬрзБрж░рзАржХрзГржд рж╕ржорзБржжржпрж╝ ржЕрж░рзНрже ржУ ржЕржирзНржпрж╛ржирзНржп рж╕ржХрж▓ ржЦрж░ржЪ рждрзОржХрзНрж╖ржгрж╛рзО ржкрж░рж┐рж╢рзЛржз ржХрж░рж┐рждрзЗ ржмрж╛ржзрзНржп ржерж╛ржХрж┐ржмред 
        ржПрждржжрзНржмрж╛рж░рж╛ рж╕рзНржкрж╖рзНржЯ ржХрж░рж╛ ржпрж╛ржЗрждрзЗржЫрзЗ ржпрзЗ, ржЛржгрзЗрж░ ржЯрж╛ржХрж╛ ржжрзНржмрж╛рж░рж╛ ржЕрж░рзНржЬрж┐ржд рж▓рж╛ржн ржмрж╛ ржХрзНрж╖рждрж┐рж░ рж╕ржХрж▓ ржжрж╛ржпрж╝ржнрж╛рж░ ржЖржорж╛рж░ ржПржмржВ ржЛржгржжрж╛рждрж╛рж░ ржХрзЛржи рж╕ржорзНржкрж░рзНржХ ржерж╛ржХрж┐ржмрзЗ ржирж╛ред</p>
        
        <p><strong>рзй.</strong> ржЖржорж┐ ржпрждржжрж┐ржи ржЙржкрж░рзЛржХрзНржд ржЛржгрзЗрж░ рж╕ржорзБржжржпрж╝ ржЯрж╛ржХрж╛ рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж░рзНржЬ рж╕рж╣ рж╕ржорзНржкрзВрж░рзНржгрж░рзВржкрзЗ ржкрж░рж┐рж╢рзЛржз ржирж╛ ржХрж░рж┐ржм, 
        рждрждржжрж┐ржи ржкрж░рзНржпржирзНржд ржЙржХрзНржд ржЛржгрзЗрж░ ржЯрж╛ржХрж╛ ржжрзНржмрж╛рж░рж╛ ржЕрж░рзНржЬрж┐ржд рж╕ржорзНржкрждрзНрждрж┐/рж╕ржорзНржкржж "ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ" ржПрж░ ржирж┐ржХржЯ ржжрж╛ржпрж╝ржмржжрзНржз ржерж╛ржХрж┐ржмрзЗ 
        ржПржмржВ рж╕ржорж┐рждрж┐рж░ ржЕржирзБржорждрж┐ ржмрзНржпрждрзАржд ржЙржХрзНржд рж╕ржорзНржкрждрзНрждрж┐ рж╣рж╕рзНрждрж╛ржирзНрждрж░, ржмрж┐ржХрзНрж░ржпрж╝ ржмрж╛ ржмржирзНржзржХ рж░рж╛ржЦрж┐рждрзЗ ржкрж╛рж░рж┐ржм ржирж╛ред 
        ржЖржорж┐ ржжрзЗрж╢рзЗрж░ ржкрзНрж░ржЪрж▓рж┐ржд ржЖржЗржирж╛ржирзБрж╕рж╛рж░рзЗ ржХрж╛ржЬ ржХрж░рж┐ржмред ржЖржорж╛рж░ ржЙржкрж░рзЛржХрзНржд ржХрж╛рж░рзНржпржХрзНрж░ржорзЗ ржЖржорж╛рж░ ржЙрждрзНрждрж░рж╛ржзрж┐ржХрж╛рж░рзАржЧржгрзЗрж░ ржоржзрзНржпрзЗ ржХрзЗрж╣ ржХрзЛржи ржЖржкрждрзНрждрж┐ ржХрж░рж┐рждрзЗ ржкрж╛рж░рж┐ржмрзЗ ржирж╛ 
        ржмрж╛ ржХрж░рж┐рж▓рзЗ рждрж╛рж╣рж╛ рж╕рж░рзНржмрж╛ржмрж╕рзНржерж╛ржпрж╝ ржЕржЧрзНрж░рж╛рж╣рзНржп рж╣ржЗржмрзЗред</p>
    </div>

    <div class="content-box" style="background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%); border-color: #28a745;">
        <p style="text-align: center; font-weight: 600; font-size: 10px; color: #155724;">
            ржПрждржжрзНржмрж╛рж░рж╛ ржЛржгрзЗрж░ ржЯрж╛ржХрж╛ ржмрзБржЭрж┐ржпрж╝рж╛ ржкрж╛ржЗржпрж╝рж╛ ржПржмржВ ржЕрждрзНрж░ ржЕржЩрзНржЧрзАржХрж╛рж░ржирж╛ржорж╛рж░ ржорж░рзНржорзЗ рж╕ржорзНржоржд рж╣ржЗржпрж╝рж╛ рж╕рзНржмрзЗржЪрзНржЫрж╛ржпрж╝ ржУ рж╕ржорзНржкрзВрж░рзНржг рж╕ржЪрзЗрждржиржнрж╛ржмрзЗ 
            ржПржЗ ржЕржЩрзНржЧрзАржХрж╛рж░ржирж╛ржорж╛ ржкрж╛ржа ржХрж░рж┐ржпрж╝рж╛ рж╕ржорзНржкрж╛ржжржи ржХрж░рж┐ржпрж╝рж╛ ржжрж┐рж▓рж╛ржоред
        </p>
    </div>

    <div class="signature-section" style="margin-top: 12px;">
        <div class="signature-box">
            <div>ржжрж╛ржпрж╝ ржжрзЗржирж╛ ржмрж╣ржиржХрж╛рж░рзА</div>
            <div class="signature-line">рж╕рзНржмрж╛ржорзА/ржоржирж┐ржЯрж░рзЗрж░ рж╕рзНржмрж╛ржХрзНрж╖рж░</div>
        </div>
        <div class="signature-box">
            <div>ржЖржмрзЗржжржиржХрж╛рж░рзА</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рждрж╛рж░рж┐ржЦ</div>
        </div>
        <div class="signature-box">
            <div>ржорзНржпрж╛ржирзЗржЬрж╛рж░</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
        <div class="signature-box">
            <div>ржЪрзЗржпрж╝рж╛рж░ржорзНржпрж╛ржи</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
        <div class="signature-box">
            <div>рж╕ржнрж╛ржкрждрж┐</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
    </div>

    <div style="margin-top: 8px; padding: 6px; background: #f8f9fa; border-radius: 4px; border: 1px solid #dee2e6;">
        <p style="text-align: center; font-size: 8px; color: #6c757d; margin: 0;">
            <strong>ржжрзНрж░рж╖рзНржЯржмрзНржп:</strong> ржПржЗ ржЕржЩрзНржЧрзАржХрж╛рж░ржирж╛ржорж╛ ржЖржЗржиржЧрждржнрж╛ржмрзЗ ржмрж╛ржзрзНржпрждрж╛ржорзВрж▓ржХ ржПржмржВ рж╕ржорж┐рждрж┐рж░ ржирж┐ржпрж╝ржо-ржХрж╛ржирзБржи ржЕржирзБржпрж╛ржпрж╝рзА ржХрж╛рж░рзНржпржХрж░ ржерж╛ржХрж┐ржмрзЗред
        </p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        const today = new Date();
        const dateStr = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear();
        document.getElementById('currentDate').textContent = dateStr;

        $(document).ready(function() {
            $('#customerSelect').select2({ placeholder: '-- рж╕ржжрж╕рзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --' });
            $('#customerSelect').on('change', function() {
                const customerId = $(this).val();
                if (customerId) window.location.href = '{{ url_for("angikarnama_form") }}?customer_id=' + customerId;
            });
        });
    </script>
</body>
</html>
