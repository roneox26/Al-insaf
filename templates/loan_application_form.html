<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>рж╕ржжрж╕рзНржп ржЖржмрзЗржжржи ржлрж░ржо</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <style>
        @page { size: A4; margin: 12mm; }
        @media print {
            .no-print { display: none !important; }
            body { margin: 0; padding: 12mm; }
        }
        body { 
            font-family: 'Kalpurush', 'Nikosh', Arial, sans-serif; 
            margin: 0; padding: 20px; font-size: 13px; line-height: 1.7;
            width: 210mm; min-height: 297mm; background: white;
        }
        .header { text-align: center; margin-bottom: 10px; border-bottom: 3px double #000; padding-bottom: 8px; position: relative; }
        .header h2 { margin: 2px; font-size: 24px; font-weight: bold; color: #1a1a1a; }
        .header p { margin: 1px; font-size: 11px; color: #333; }
        .header h3 { 
            margin: 8px auto; font-size: 16px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white; padding: 8px 25px; display: inline-block; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .photo-box { 
            position: absolute; right: 10px; top: 5px; width: 95px; height: 115px;
            border: 2px solid #000; display: flex; align-items: center; justify-content: center;
            background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
            font-size: 11px; color: #666; font-weight: bold;
        }
        .form-section { margin: 8px 0; }
        .form-section p { margin: 4px 0; text-align: justify; line-height: 1.8; }
        .form-row { 
            margin: 5px 0; line-height: 2.3; border-bottom: 1px dotted #ccc;
            padding: 3px 0; display: flex; align-items: center;
        }
        .form-row strong { color: #0066cc; font-weight: 600; }
        table { width: 100%; border-collapse: collapse; margin: 10px 0; }
        table td { 
            border: 1.5px solid #333; padding: 10px 6px; font-size: 12px;
            text-align: center; min-height: 35px; background: #fafafa;
        }
        table td:first-child { text-align: left; padding-left: 10px; font-weight: 600; background: #f0f0f0; }
        table tr:hover td { background: #e8f4f8; }
        .signature-section { 
            margin-top: 35px; display: flex; justify-content: space-between;
            font-size: 12px; padding-top: 15px; border-top: 1px solid #ddd;
        }
        .signature-box { text-align: center; min-width: 140px; }
        .signature-line { border-top: 1.5px solid #000; margin-top: 45px; padding-top: 5px; font-weight: 500; }
        .no-print { 
            position: fixed; top: 10px; right: 10px; z-index: 1000;
            background: white; padding: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border-radius: 10px; border: 2px solid #007bff;
        }
        .customer-select {
            margin-bottom: 12px; padding: 10px; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 8px; border: 2px solid #007bff;
        }
        .customer-select label { font-weight: bold; margin-bottom: 5px; display: block; color: #0d47a1; }
        .btn { padding: 10px 20px; border: none; border-radius: 6px; cursor: pointer; 
               font-size: 14px; font-weight: 500; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,123,255,0.4); }
        .btn-secondary { background: #6c757d; color: white; text-decoration: none; display: inline-block; }
        .info-highlight { background: #fff3cd; padding: 2px 6px; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="no-print">
        <div class="customer-select">
            <label>рж╕ржжрж╕рзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи:</label>
            <select id="customerSelect" style="width: 100%; padding: 8px; border-radius: 5px; border: 1px solid #007bff;">
                <option value="">-- рж╕ржжрж╕рзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --</option>
                {% for c in customers %}
                <option value="{{ c.id }}" {% if customer and customer.id == c.id %}selected{% endif %}>
                    {{ c.member_no }} - {{ c.name }} - {{ c.phone }}
                </option>
                {% endfor %}
            </select>
        </div>
        <button onclick="window.print()" class="btn btn-primary">ЁЯЦия╕П ржкрзНрж░рж┐ржирзНржЯ ржХрж░рзБржи</button>
        <a href="{{ url_for('application_forms') }}" class="btn btn-secondary">тЖР ржлрж┐рж░рзЗ ржпрж╛ржи</a>
    </div>

    <div class="header">
        <div class="photo-box">ржЫржмрж┐</div>
        <h2>ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ</h2>
        <p>ржарж┐ржХрж╛ржирж╛ржГ ржЧрзНрж░рж╛ржо/ржкрзЛрж╖рзНржЯржГ ржирзЗрж╣рж╛рж▓ржкрзБрж░, ржерж╛ржирж╛ржГ ржоржирж┐рж░рж╛ржоржкрзБрж░, ржЬрзЗрж▓рж╛ржГ ржпрж╢рзЛрж░ред</p>
        <p>рж░рзЗржЬрж┐рж╕рзНржЯрзНрж░рзЗрж╢ржи ржиржВ: рзнрзо ржЬрзЗ | ржлрзЛржи: рзжрззрзнрззрзл-рзжрзжрзжрзжрзжрзж</p>
        <h3>рж╕ржжрж╕рзНржп ржЖржмрзЗржжржи ржлрж░ржо</h3>
        <p style="text-align: right; margin: 5px 10px 0 0; font-weight: 500;">рждрж╛рж░рж┐ржЦ: <span id="currentDate" class="info-highlight"></span></p>
    </div>

    <div class="form-section">
        <p><strong>ржмрж░рж╛ржмрж░,</strong><br>
        рж╕ржнрж╛ржкрждрж┐/рж╕ржорзНржкрж╛ржжржХ<br>
        ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ<br>
        <strong>ржмрж┐рж╖ржпрж╝:</strong> рж╕ржжрж╕рзНржп ржкржж ржкрж╛ржУржпрж╝рж╛рж░ ржЬржирзНржп ржЖржмрзЗржжржиред</p>
        
        <p><strong>ржЬржирж╛ржм,</strong></p>
        <p style="text-indent: 50px; text-align: justify;">
            ржмрж┐ржирзАржд ржирж┐ржмрзЗржжржи ржПржЗ ржпрзЗ, ржЖржорж┐ ржЖрж▓-ржЗржирж╕рж╛ржл ржХрзНрж╖рзБржжрзНрж░ ржмрзНржпржмрж╕рж╛ржпрж╝рзА рж╕ржоржмрж╛ржпрж╝ рж╕ржорж┐рждрж┐ рж▓рж┐ржГ ржПрж░ рж╕ржХрж▓ ржирж┐ржпрж╝ржо-ржХрж╛ржирзБржи ржорзЗржирзЗ рж╕ржжрж╕рзНржп рж╣ржУржпрж╝рж╛рж░ ржЬржирзНржп ржЖржмрзЗржжржи ржХрж░рж┐рждрзЗржЫрж┐ред ржЖржорж┐ ржЖржкржирж╛рж░ рж╕ржВржЧржаржирзЗрж░ рж╕ржХрж▓ ржирж┐ржпрж╝ржо-ржХрж╛ржирзБржи ржорзЗржирзЗ ржЪрж▓рж╛рж░ ржЕржЩрзНржЧрзАржХрж╛рж░ ржХрж░рж┐рждрзЗржЫрж┐ ржПржмржВ ржПржЗ рж╕ржВржЧржаржирзЗрж░ рж╕рзНржерж╛ржпрж╝рзА ржХрзНрж╖рждрж┐ржХрж░ ржХрзЛржи ржХрж╛ржЬ ржХрж░рж┐ржм ржирж╛ ржмрж╛ ржП ржмрзНржпрж╛ржкрж╛рж░рзЗ ржХрж╛ржЙржХрзЗ ржХрзЛржи рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржм ржирж╛ред
        </p>
    </div>

    <div class="form-section" style="background: #f8f9fa; padding: 10px; border-radius: 5px; border-left: 4px solid #007bff;">
        <h4 style="margin: 5px 0 10px 0; color: #0066cc;">ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржпрж╛ржмрж▓рзА:</h4>
        <div class="form-row"><strong>рзз.</strong> ржЖржмрзЗржжржиржХрж╛рж░рзАрж░ ржирж╛ржо: <strong id="name">{{ customer.name if customer else '___________________________' }}</strong> | ржкрж┐рждрж╛/рж╕рзНржмрж╛ржорзА: <strong id="father">{{ customer.father_husband if customer else '___________________________' }}</strong></div>
        <div class="form-row"><strong>рзи.</strong> ржорж╛рждрж╛рж░ ржирж╛ржо: ___________________________ | ржзрж░рзНржо: ржЗрж╕рж▓рж╛ржо/рж╣рж┐ржирзНржжрзБ | ржЬрж╛рждрзАржпрж╝рждрж╛: ржмрж╛ржВрж▓рж╛ржжрзЗрж╢рзА</div>
        <div class="form-row"><strong>рзй.</strong> ржЬржирзНржо рждрж╛рж░рж┐ржЦ: ____/____/________ | ржкрзЗрж╢рж╛: <strong id="profession">{{ customer.profession if customer else 'ржмрзНржпржмрж╕рж╛/ржХрзГрж╖рж┐/ржЪрж╛ржХрзБрж░рзАржЬрзАржмрж┐/ржЕржирзНржпрж╛ржирзНржп' }}</strong></div>
        <div class="form-row"><strong>рзк.</strong> ржЬрж╛рждрзАржпрж╝ ржкрж░рж┐ржЪржпрж╝ржкрждрзНрж░/ржЬржирзНржо ржирж┐ржмржирзНржзржи ржиржВ: <strong id="nid">{{ customer.nid_no if customer else '___________________________' }}</strong> | рж▓рж┐ржЩрзНржЧ: ржкрзБрж░рзБрж╖/ржорж╣рж┐рж▓рж╛</div>
        <div class="form-row"><strong>рзл.</strong> ржмрж░рзНрждржорж╛ржи ржарж┐ржХрж╛ржирж╛ - ржЧрзНрж░рж╛ржо: <strong id="village">{{ customer.village if customer else '________' }}</strong> | ржкрзЛрж╕рзНржЯ: <strong id="post">{{ customer.post if customer else '________' }}</strong> | ржерж╛ржирж╛: <strong id="thana">{{ customer.thana if customer else '________' }}</strong> | ржЬрзЗрж▓рж╛: <strong id="district">{{ customer.district if customer else 'ржпрж╢рзЛрж░' }}</strong></div>
        <div class="form-row"><strong>рзм.</strong> рж╕рзНржерж╛ржпрж╝рзА ржарж┐ржХрж╛ржирж╛ - ржЧрзНрж░рж╛ржо: __________ | ржкрзЛрж╕рзНржЯ: __________ | ржерж╛ржирж╛: __________ | ржЬрзЗрж▓рж╛: ржпрж╢рзЛрж░</div>
        <div class="form-row"><strong>рзн.</strong> рж╢рж┐ржХрзНрж╖рж╛ржЧржд ржпрзЛржЧрзНржпрждрж╛: __________ | ржмрзИржмрж╛рж╣рж┐ржХ ржЕржмрж╕рзНржерж╛: ржмрж┐ржмрж╛рж╣рж┐ржд/ржЕржмрж┐ржмрж╛рж╣рж┐ржд | рж╕ржирзНрждрж╛ржи рж╕ржВржЦрзНржпрж╛: ржЫрзЗрж▓рзЗ __ржЯрж┐, ржорзЗржпрж╝рзЗ __ржЯрж┐</div>
        <div class="form-row"><strong>рзо.</strong> рж╕ржжрж╕рзНржп рж╣ржУржпрж╝рж╛рж░ рждрж╛рж░рж┐ржЦ: <span id="joinDate" class="info-highlight"></span> | рж╕ржжрж╕рзНржп ржиржВ: <strong id="memberNo">{{ customer.member_no if customer else '________' }}</strong> | ржлрзЛржи: <strong id="phone">{{ customer.phone if customer else '___________________________' }}</strong></div>
    </div>

    <h4 style="margin: 15px 0 8px 0; color: #0066cc; text-align: center;">ржЛржг ржЧрзНрж░рж╣ржгрзЗрж░ ржмрж┐ржмрж░ржг:</h4>
    <table>
        <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
            <td style="font-weight: bold; color: white; background: transparent;">ржмрж┐ржмрж░ржг</td>
            <td style="color: white; background: transparent;">рззржо ржжржлрж╛</td>
            <td style="color: white; background: transparent;">рзиржпрж╝ ржжржлрж╛</td>
            <td style="color: white; background: transparent;">рзйржпрж╝ ржжржлрж╛</td>
            <td style="color: white; background: transparent;">рзкрж░рзНрже ржжржлрж╛</td>
        </tr>
        <tr><td>ржЛржгрзЗрж░ ржзрж░ржи</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
        <tr><td>ржЛржг ржЧрзНрж░рж╣ржгрзЗрж░ рждрж╛рж░рж┐ржЦ</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
        <tr><td>ржЛржгрзЗрж░ ржкрж░рж┐ржорж╛ржг (ржЯрж╛ржХрж╛)</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
        <tr><td>ржЛржгрзЗрж░ ржЙржжрзНржжрзЗрж╢рзНржп</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
        <tr><td>ржкрж░рж┐рж╢рзЛржзрзЗрж░ ржорзЗржпрж╝рж╛ржж</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr>
    </table>

    <div class="form-section" style="background: #fff9e6; padding: 10px; border-radius: 5px; border-left: 4px solid #ffc107;">
        <h4 style="margin: 5px 0 10px 0; color: #f57c00;">ржЕрждрж┐рж░рж┐ржХрзНржд рждржерзНржп:</h4>
        <div class="form-row"><strong>рзп.</strong> ржмрзНржпржмрж╕рж╛ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржирзЗрж░ ржирж╛ржо ржУ ржарж┐ржХрж╛ржирж╛: _______________________________________________</div>
        <div class="form-row"><strong>рззрзж.</strong> рж╕ржорзНржкржжрзЗрж░ ржмрж┐ржмрж░ржг - рж╕рзНржерж╛ржмрж░ рж╕ржорзНржкржж: __________ | ржЕрж╕рзНржерж╛ржмрж░ рж╕ржорзНржкржж: __________ | ржЕржирзНржпрж╛ржирзНржп: __________ | ржорзЛржЯ ржорзВрж▓рзНржп: __________</div>
        <div class="form-row"><strong>рззрзз.</strong> ржЛржгрзЗрж░ ржЙржжрзНржжрзЗрж╢рзНржп: _______________________________________________</div>
        <div class="form-row"><strong>рззрзи.</strong> ржХ) ржЖржмрзЗржжржиржХрзГржд ржЛржгрзЗрж░ ржкрж░рж┐ржорж╛ржг: __________ ржЯрж╛ржХрж╛ | ржЦ) ржЛржгрзЗрж░ ржжржлрж╛: __________ | ржЧ) ржорзЗржпрж╝рж╛ржж: __________ ржжрж┐ржи/ржорж╛рж╕</div>
        <div class="form-row"><strong>рззрзй.</strong> ржЛржг ржкрж░рж┐рж╢рзЛржз ржкржжрзНржзрждрж┐: ржкрзНрж░рждрж┐ржжрж┐ржи/рж╕рж╛ржкрзНрждрж╛рж╣рж┐ржХ/ржкрж╛ржХрзНрж╖рж┐ржХ/ржорж╛рж╕рж┐ржХ/ржПржХрж╛ржХрж╛рж▓рзАржи</div>
        <div class="form-row"><strong>рззрзк.</strong> рж╕рж╛рж░рзНржнрж┐рж╕ ржЪрж╛рж░рзНржЬрзЗрж░ рж╣рж╛рж░: ____% | ржЖржжрж╛ржпрж╝ ржкржжрзНржзрждрж┐: ржкрзНрж░рждрж┐ржжрж┐ржи/рж╕рж╛ржкрзНрждрж╛рж╣рж┐ржХ/ржкрж╛ржХрзНрж╖рж┐ржХ/ржорж╛рж╕рж┐ржХ/ржПржХрж╛ржХрж╛рж▓рзАржи</div>
        <div class="form-row"><strong>рззрзл.</strong> ржмрзНржпрж╛ржВржХ рж╣рж┐рж╕рж╛ржм ржиржВ: ___________________________ | ржмрзНржпрж╛ржВржХрзЗрж░ ржирж╛ржо: ___________________________</div>
    </div>

    <div class="signature-section" style="margin-top: 40px;">
        <div class="signature-box">
            <div style="font-weight: 600; color: #333;">ржкрж╛рж░рж┐ржмрж╛рж░рж┐ржХ ржЧрзНржпрж╛рж░рж╛ржирзНржЯрж┐</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
        <div class="signature-box">
            <div style="font-weight: 600; color: #333;">ржЖржмрзЗржжржиржХрж╛рж░рзАрж░ рж╕рзНржмрж╛ржХрзНрж╖рж░</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рждрж╛рж░рж┐ржЦ</div>
        </div>
    </div>

    <div class="signature-section" style="margin-top: 25px; border-top: 2px solid #007bff; padding-top: 20px;">
        <div class="signature-box">
            <div style="font-weight: 600; color: #0066cc;">ржлрж┐рж▓рзНржб ржЕржлрж┐рж╕рж╛рж░</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
        <div class="signature-box">
            <div style="font-weight: 600; color: #0066cc;">ржорзНржпрж╛ржирзЗржЬрж╛рж░</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
        <div class="signature-box">
            <div style="font-weight: 600; color: #0066cc;">ржЕржирзБржорзЛржжржиржХрж╛рж░рзА</div>
            <div class="signature-line">рж╕рзНржмрж╛ржХрзНрж╖рж░ ржУ рж╕рзАрж▓</div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        const today = new Date();
        const dateStr = today.getDate() + '/' + (today.getMonth() + 1) + '/' + today.getFullYear();
        document.getElementById('currentDate').textContent = dateStr;
        document.getElementById('joinDate').textContent = dateStr;

        $(document).ready(function() {
            $('#customerSelect').select2({ placeholder: '-- рж╕ржжрж╕рзНржп ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи --' });
            $('#customerSelect').on('change', function() {
                const customerId = $(this).val();
                if (customerId) window.location.href = '{{ url_for("loan_application_form") }}?customer_id=' + customerId;
            });
        });
    </script>
</body>
</html>
